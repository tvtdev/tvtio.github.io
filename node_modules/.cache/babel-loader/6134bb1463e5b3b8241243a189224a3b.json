{"ast":null,"code":"import _regeneratorRuntime from \"/home/ubuntu/api/docs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"/home/ubuntu/api/docs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"/home/ubuntu/api/docs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/ubuntu/api/docs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/home/ubuntu/api/docs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/ubuntu/api/docs/src/Posts.js\";\nimport React, { useState, useEffect, useReducer } from 'react';\nimport { css } from 'glamor';\nimport { Link } from 'react-router-dom';\nimport uuid from 'uuid/v4';\nimport { listPosts } from './graphql/queries';\nimport { onCreatePost } from './graphql/subscriptions';\nimport { API, graphqlOperation } from 'aws-amplify';\n\nfunction fetchPosts(_x) {\n  return _fetchPosts.apply(this, arguments);\n}\n\nfunction _fetchPosts() {\n  _fetchPosts = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(dispatch) {\n    var postData;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return API.graphql(graphqlOperation(listPosts));\n\n          case 3:\n            postData = _context.sent;\n            dispatch({\n              type: 'fetchPostsSuccess',\n              posts: postData.data.listPosts.items\n            });\n            _context.next = 11;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            console.log('error fetching posts...: ', _context.t0);\n            dispatch({\n              type: 'fetchPostsError'\n            });\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n  return _fetchPosts.apply(this, arguments);\n}\n\nvar initialState = {\n  posts: [],\n  loading: true,\n  error: false\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'fetchPostsSuccess':\n      return _objectSpread({}, state, {\n        posts: action.posts,\n        loading: false\n      });\n\n    case 'addPostFromSubscription':\n      return _objectSpread({}, state, {\n        posts: [action.post].concat(_toConsumableArray(state.posts))\n      });\n\n    case 'fetchPostsError':\n      return _objectSpread({}, state, {\n        loading: false,\n        error: true\n      });\n\n    default:\n      throw new Error();\n  }\n}\n\nvar Posts = function Posts(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isOpen = _useState2[0],\n      toggleModal = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      input = _useState4[0],\n      updateInput = _useState4[1];\n\n  var _useReducer = useReducer(reducer, initialState),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      postsState = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  function toggle() {\n    toggleModal(!isOpen);\n  }\n\n  function onChange(e) {\n    updateInput(e.target.value);\n  }\n\n  function navigate() {\n    if (input === '') return;\n    var id = uuid();\n    var url = \"/post/\".concat(id, \"/\").concat(input);\n    props.history.push(url);\n  }\n\n  useEffect(function () {\n    fetchPosts(dispatch);\n  }, []);\n  useEffect(function () {\n    var subscriber = API.graphql(graphqlOperation(onCreatePost)).subscribe({\n      next: function next(data) {\n        var postFromSub = data.value.data.onCreatePost;\n        dispatch({\n          type: 'addPostFromSubscription',\n          post: postFromSub\n        });\n      }\n    });\n    return function () {\n      return subscriber.unsubscribe();\n    };\n  }, []);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"div\", Object.assign({}, styles.headingContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(\"h1\", Object.assign({}, styles.heading, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    role: \"img\",\n    \"aria-label\": \"write\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"\\u270D\\uFE0F\"), \" Write with Me\"), React.createElement(\"div\", Object.assign({}, styles.taglineContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }), React.createElement(\"span\", Object.assign({}, styles.tagLineText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }), \"Real-time collaborative blogging platform.\"))), React.createElement(\"div\", Object.assign({}, styles.buttonContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }), React.createElement(\"div\", Object.assign({}, styles.button, {\n    onClick: toggle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }), React.createElement(\"p\", Object.assign({}, styles.buttonText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }), \"New Post\")))), React.createElement(\"div\", Object.assign({}, styles.body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }), postsState.loading && React.createElement(\"div\", Object.assign({}, styles.loadingContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }), React.createElement(\"h1\", Object.assign({}, styles.postTitle, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }), \"Loading..\")), React.createElement(\"div\", Object.assign({}, styles.postList, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }), postsState.posts.map(function (p, i) {\n    return React.createElement(\"div\", {\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Link, Object.assign({\n      to: \"/post/\".concat(p.id, \"/\").concat(p.title)\n    }, styles.link, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(\"h1\", Object.assign({}, styles.postTitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), p.title)));\n  })), React.createElement(\"div\", Object.assign({}, styles.footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }), React.createElement(\"p\", Object.assign({}, styles.footerText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }), \"Built with \\xA0\", React.createElement(\"a\", Object.assign({\n    target: \"_blank\",\n    href: \"https://aws-amplify.github.io/\"\n  }, styles.footerLink, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }), \"AWS Amplify\"), \"\\xA0 & \\xA0\", React.createElement(\"a\", Object.assign({\n    target: \"_blank\",\n    href: \"https://aws.amazon.com/appsync/\"\n  }, styles.footerLink, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }), \"AWS AppSync\"), \". Deployed with the\", React.createElement(\"a\", Object.assign({\n    target: \"_blank\",\n    href: \"https://aws.amazon.com/amplify/console/\"\n  }, styles.footerLink, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }), \"\\xA0Amplify Console\"), \".\"))), isOpen && React.createElement(Modal, {\n    onChange: onChange,\n    input: input,\n    navigate: navigate,\n    toggle: toggle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }));\n};\n\nexport default Posts;\n\nvar Modal = function Modal(_ref) {\n  var onChange = _ref.onChange,\n      input = _ref.input,\n      navigate = _ref.navigate,\n      toggle = _ref.toggle;\n  return React.createElement(\"div\", Object.assign({}, styles.modalContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }), React.createElement(\"input\", Object.assign({\n    placeholder: \"Post Title\"\n  }, styles.input, {\n    onChange: onChange,\n    value: input,\n    key: \"input\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  })), React.createElement(\"div\", Object.assign({}, css(styles.modalButton), {\n    onClick: navigate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }), React.createElement(\"p\", Object.assign({}, styles.modalButtonText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }), \"Create Post\")), React.createElement(\"div\", Object.assign({\n    onClick: toggle\n  }, styles.modalButton, styles.cancelButton, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }), React.createElement(\"p\", Object.assign({}, styles.modalButtonText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }), \"Cancel\")));\n};\n\nvar styles = {\n  heading: css({\n    color: 'white',\n    margin: 0,\n    '@media(max-width: 640px)': {\n      fontSize: 30\n    }\n  }),\n  taglineContainer: css({\n    marginLeft: 65,\n    paddingRight: 20,\n    marginTop: -10,\n    '@media(max-width: 640px)': {\n      marginLeft: 37,\n      marginTop: -3\n    }\n  }),\n  tagLineText: css({\n    color: 'white'\n  }),\n  headingContainer: css({\n    height: 130,\n    backgroundColor: 'black',\n    display: 'flex',\n    alignItems: 'center',\n    paddingLeft: 30\n  }),\n  buttonContainer: css({\n    display: 'flex',\n    justifyContent: 'flex-end',\n    flex: 1\n  }),\n  button: css({\n    padding: '8px 42px',\n    backgroundColor: '#66e2d5',\n    marginRight: 90,\n    borderRadius: 3,\n    cursor: 'pointer',\n    minWidth: 56,\n    '@media(max-width: 640px)': {\n      marginRight: 20,\n      padding: '4px 20px'\n    }\n  }),\n  buttonText: css({\n    fontSize: 20,\n    marginTop: -2,\n    marginBottom: 0,\n    '@media(max-width: 640px)': {\n      fontSize: 16\n    }\n  }),\n  body: css({\n    width: 'calc(100vw - 30px)',\n    border: '15px solid #66e2d5',\n    padding: '25px 0px',\n    overflowY: 'scroll',\n    '@media(max-width: 640px)': {\n      paddingTop: 0,\n      overflowY: 'none'\n    }\n  }),\n  loadingContainer: css({\n    paddingLeft: 50,\n    paddingTop: 20\n  }),\n  postList: css({\n    width: '900px',\n    margin: '0 auto',\n    padding: '0px 0px 20px',\n    '@media(max-width: 940px)': {\n      width: 'calc(100% - 40px)',\n      padding: '10px 20px'\n    }\n  }),\n  postTitle: css({\n    marginTop: 10,\n    borderBottom: '3px solid #66e2d5',\n    paddingBottom: '3px',\n    ':hover': {\n      opacity: 0.7\n    },\n    '@media(max-width: 640px)': {\n      fontSize: 32,\n      marginTop: 5\n    }\n  }),\n  link: css({\n    textDecoration: 'none',\n    color: 'black'\n  }),\n  modalContainer: css({\n    position: 'fixed',\n    left: '50%',\n    top: '50%',\n    marginLeft: '-250px',\n    marginTop: '-150px',\n    height: 210,\n    border: '4px solid black',\n    width: 500,\n    backgroundColor: 'white',\n    boxShadow: '1px 1px 12px rgba(0, 0, 0, .15)',\n    zIndex: 1000,\n    padding: 20,\n    borderRadius: 3,\n    '@media(max-width: 740px)': {\n      width: '250px',\n      marginLeft: '-150px'\n    }\n  }),\n  input: css({\n    height: 50,\n    width: 300,\n    fontSize: 22,\n    outline: 'none',\n    border: 'none',\n    borderBottom: '3px solid #66e2d5',\n    marginBottom: 15,\n    '@media(max-width: 740px)': {\n      width: '225px'\n    }\n  }),\n  modalButton: css({\n    backgroundColor: '#66e2d5',\n    padding: '14px',\n    cursor: 'pointer',\n    width: 200,\n    marginTop: 10\n  }),\n  modalButtonText: css({\n    textAlign: 'center',\n    fontSize: 20,\n    margin: '2px 0px'\n  }),\n  cancelButton: css({\n    backgroundColor: '#ededed'\n  }),\n  footer: css({\n    padding: '0px 20px'\n  }),\n  footerText: css({\n    fontSize: 16,\n    marginBottom: 0\n  }),\n  footerLink: css({\n    textDecoration: 'none',\n    color: '#00ceb8'\n  })\n};","map":{"version":3,"sources":["/home/ubuntu/api/docs/src/Posts.js"],"names":["React","useState","useEffect","useReducer","css","Link","uuid","listPosts","onCreatePost","API","graphqlOperation","fetchPosts","dispatch","graphql","postData","type","posts","data","items","console","log","initialState","loading","error","reducer","state","action","post","Error","Posts","props","isOpen","toggleModal","input","updateInput","postsState","toggle","onChange","e","target","value","navigate","id","url","history","push","subscriber","subscribe","next","postFromSub","unsubscribe","styles","headingContainer","heading","taglineContainer","tagLineText","buttonContainer","button","buttonText","body","loadingContainer","postTitle","postList","map","p","i","title","link","footer","footerText","footerLink","Modal","modalContainer","modalButton","modalButtonText","cancelButton","color","margin","fontSize","marginLeft","paddingRight","marginTop","height","backgroundColor","display","alignItems","paddingLeft","justifyContent","flex","padding","marginRight","borderRadius","cursor","minWidth","marginBottom","width","border","overflowY","paddingTop","borderBottom","paddingBottom","opacity","textDecoration","position","left","top","boxShadow","zIndex","outline","textAlign"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useReducer } from 'react'\nimport { css } from 'glamor'\nimport { Link } from 'react-router-dom'\nimport uuid from 'uuid/v4'\nimport { listPosts } from './graphql/queries'\nimport { onCreatePost } from './graphql/subscriptions'\nimport { API, graphqlOperation } from 'aws-amplify'\n\nasync function fetchPosts(dispatch) {\n  try {\n    const postData = await API.graphql(graphqlOperation(listPosts))\n    dispatch({\n      type: 'fetchPostsSuccess',\n      posts: postData.data.listPosts.items\n    })\n  } catch (err) {\n    console.log('error fetching posts...: ', err)\n    dispatch({\n      type: 'fetchPostsError',\n    })\n  }\n}\n\nconst initialState = {\n  posts: [],\n  loading: true,\n  error: false\n}\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'fetchPostsSuccess':\n      return {\n        ...state,\n        posts: action.posts,\n        loading: false\n      }\n    case 'addPostFromSubscription':\n      return {\n        ...state,\n        posts: [\n          action.post,\n          ...state.posts\n        ]\n      }\n    case 'fetchPostsError':\n      return {\n        ...state,\n        loading: false,\n        error: true\n      }\n    default:\n      throw new Error();\n  }\n}\n\nconst Posts = (props) => {\n  const [isOpen, toggleModal] = useState(false)\n  const [input, updateInput] = useState('')\n  const [postsState, dispatch] = useReducer(reducer, initialState)\n\n  function toggle() { toggleModal(!isOpen) }\n  function onChange(e) { updateInput(e.target.value) }\n\n  function navigate() {\n    if (input === '') return\n    const id = uuid()\n    const url = `/post/${id}/${input}`\n    props.history.push(url)\n  }\n\n  useEffect(() => {\n    fetchPosts(dispatch)\n  }, [])\n\n  useEffect(() => {\n    const subscriber = API.graphql(graphqlOperation(onCreatePost)).subscribe({\n      next: data => {\n        const postFromSub = data.value.data.onCreatePost\n        dispatch({\n          type: 'addPostFromSubscription',\n          post: postFromSub\n        })\n      }\n    });\n    return () => subscriber.unsubscribe()\n  }, [])\n\n  return (\n    <div>\n      <div {...styles.headingContainer}>\n        <div>\n          <h1 {...styles.heading}><span role='img' aria-label='write'>✍️</span> Write with Me</h1>\n          <div {...styles.taglineContainer}>\n            <span\n              {...styles.tagLineText}\n            >Real-time collaborative blogging platform.</span>\n          </div>\n        </div>\n        <div {...styles.buttonContainer}>\n          <div {...styles.button} onClick={toggle}>\n            <p {...styles.buttonText}>New Post</p>\n          </div>\n        </div>\n      </div>\n      <div {...styles.body}>\n        {\n          postsState.loading && (\n            <div {...styles.loadingContainer}>\n              <h1 {...styles.postTitle}>Loading..</h1>\n            </div>\n          )\n        }\n        <div {...styles.postList}>\n          {\n            postsState.posts.map((p, i) => (\n              <div key={i}>\n                <Link to={`/post/${p.id}/${p.title}`} {...styles.link}>\n                  <h1 {...styles.postTitle}>{p.title}</h1>\n                </Link>\n              </div>\n            ))\n          }\n        </div>\n        <div {...styles.footer}>\n          <p {...styles.footerText}>\n          Built with &nbsp;\n          <a\n          target=\"_blank\"\n          href=\"https://aws-amplify.github.io/\" {...styles.footerLink}>AWS Amplify</a>\n          &nbsp; &amp; &nbsp;\n          <a\n          target=\"_blank\"\n          href=\"https://aws.amazon.com/appsync/\" {...styles.footerLink}>AWS AppSync</a>. Deployed with the\n          <a\n          target=\"_blank\"\n          href=\"https://aws.amazon.com/amplify/console/\" {...styles.footerLink}>&nbsp;Amplify Console</a>\n          .\n          </p>\n        </div>\n      </div>\n      {\n        isOpen && (\n          <Modal\n            onChange={onChange}\n            input={input}\n            navigate={navigate}\n            toggle={toggle}\n          />\n        )\n      }\n      \n    </div>\n  )\n}\n\nexport default Posts\n\nconst Modal = ({ onChange, input, navigate, toggle }) => (\n  <div {...styles.modalContainer}>\n    <input\n      placeholder=\"Post Title\"\n      {...styles.input}\n      onChange={onChange}\n      value={input}\n      key=\"input\"\n    />\n    <div {...css(styles.modalButton)} onClick={navigate}>\n      <p {...styles.modalButtonText}>Create Post</p>\n    </div>\n    <div onClick={toggle} {...styles.modalButton} {...styles.cancelButton}>\n      <p\n        {...styles.modalButtonText}>Cancel</p>\n    </div>\n  </div>\n)\n\nconst styles = {\n  heading: css({\n    color: 'white', \n    margin: 0,\n    '@media(max-width: 640px)': {\n      fontSize: 30\n    }\n  }),\n  taglineContainer: css({\n    marginLeft: 65,\n    paddingRight: 20,\n    marginTop: -10,\n    '@media(max-width: 640px)': {\n      marginLeft: 37,\n      marginTop: -3,\n    }\n  }),\n  tagLineText: css({\n    color: 'white'\n  }),\n  headingContainer: css({\n    height: 130,\n    backgroundColor: 'black', \n    display: 'flex',\n    alignItems: 'center',\n    paddingLeft: 30\n  }),\n  buttonContainer: css({\n    display: 'flex',\n    justifyContent: 'flex-end',\n    flex: 1\n  }),\n  button: css({\n    padding: '8px 42px',\n    backgroundColor: '#66e2d5',\n    marginRight: 90,\n    borderRadius: 3,\n    cursor: 'pointer',\n    minWidth: 56,\n    '@media(max-width: 640px)': {\n      marginRight: 20,\n      padding: '4px 20px'\n    }\n  }),\n  buttonText: css({\n    fontSize: 20,\n    marginTop: -2,\n    marginBottom: 0,\n    '@media(max-width: 640px)': {\n      fontSize: 16\n    }\n  }),\n  body: css({\n    width: 'calc(100vw - 30px)',\n    border: '15px solid #66e2d5',\n    padding: '25px 0px',\n    overflowY: 'scroll',\n    '@media(max-width: 640px)': {\n      paddingTop: 0,\n      overflowY: 'none'\n    }\n  }),\n  loadingContainer: css({\n    paddingLeft: 50,\n    paddingTop: 20\n  }),\n  postList: css({\n    width: '900px',\n    margin: '0 auto',\n    padding: '0px 0px 20px',\n    \n    '@media(max-width: 940px)': {\n      width: 'calc(100% - 40px)',\n      padding: '10px 20px'\n    }\n  }),\n  postTitle: css({\n    marginTop: 10,\n    borderBottom: '3px solid #66e2d5',\n    paddingBottom: '3px',\n    ':hover': {\n      opacity: 0.7\n    },\n    '@media(max-width: 640px)': {\n      fontSize: 32,\n      marginTop: 5\n    }\n  }),\n  link: css({\n    textDecoration: 'none',\n    color: 'black'\n  }),\n  modalContainer: css({\n    position: 'fixed',\n    left: '50%',\n    top: '50%',\n    marginLeft: '-250px',\n    marginTop: '-150px',\n    height: 210,\n    border: '4px solid black',\n    width: 500,\n    backgroundColor: 'white',\n    boxShadow: '1px 1px 12px rgba(0, 0, 0, .15)',\n    zIndex: 1000,\n    padding: 20,\n    borderRadius: 3,\n    '@media(max-width: 740px)': {\n      width: '250px',\n      marginLeft: '-150px',\n    }\n  }),\n  input: css({\n    height: 50,\n    width: 300,\n    fontSize: 22,\n    outline: 'none',\n    border: 'none',\n    borderBottom: '3px solid #66e2d5',\n    marginBottom: 15,\n    '@media(max-width: 740px)': {\n      width: '225px',\n    }\n  }),\n  modalButton: css({\n    backgroundColor: '#66e2d5',\n    padding: '14px',\n    \n    cursor: 'pointer',\n    width: 200,\n    marginTop: 10,\n  }),\n  modalButtonText: css({\n    textAlign: 'center',\n    fontSize: 20,\n    margin: '2px 0px'\n  }),\n  cancelButton: css({\n    backgroundColor: '#ededed'\n  }),\n  footer: css({\n    padding: '0px 20px'\n  }),\n  footerText: css({\n    fontSize: 16,\n    marginBottom: 0\n  }),\n  footerLink: css({\n    textDecoration: 'none',\n    color: '#00ceb8'\n  })\n}"]},"metadata":{},"sourceType":"module"}